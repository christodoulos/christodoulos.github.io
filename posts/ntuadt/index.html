<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>NTUA Digital Twin using FIWARE tools &#183; Christodoulos Fragkoudakis</title><meta name=title content="NTUA Digital Twin using FIWARE tools &#183; Christodoulos Fragkoudakis"><link rel=canonical href=http://fragkoudakis.gr/posts/ntuadt/><link type=text/css rel=stylesheet href=/css/main.bundle.min.b81dfac662ec9b7c9851d326b8a51b2a9f5a3f9fc6316a0bf18fe28192ef40e9cec2ae4b07fe7377e5029b0e160d05e086336e90156e653d31cd9aa2110cb645.css integrity="sha512-uB36xmLsm3yYUdMmuKUbKp9aP5/GMWoL8Y/igZLvQOnOwq5LB/5zd+UCmw4WDQXghjNukBVuZT0xzZqiEQy2RQ=="><script type=text/javascript src=/js/appearance.min.9f339e83dd90dc94251893129cfc85cc479aaa0f9fba8f785b7fc36119fa50653fec43bcfb790b8e74d0d7586313dc5d4a606d5db8c8ed7a6ac444fa905e3439.js integrity="sha512-nzOeg92Q3JQlGJMSnPyFzEeaqg+fuo94W3/DYRn6UGU/7EO8+3kLjnTQ11hjE9xdSmBtXbjI7XpqxET6kF40OQ=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="NTUA Digital Twin using FIWARE tools"><meta property="og:description" content="I document how I utilized the FIWARE ecosystem to develop a Digital Twin for the NTUA Campus. I provide my work for disseminating knowledge about FIWARE under the Creative Commons Attribution-ShareAlike 4.0 International License.
Introduction # This paper documents the approach of Urban Water Management and Hydroinformatcs Group in NTUA to create a Digital Twin for the NTUA campus. We chose to employ the FIWARE tools ecosystem and apply the necessary technical glue for the assembly of a Digital Twin data representation of NTUA&rsquo;s campus environment."><meta property="og:type" content="article"><meta property="og:url" content="http://fragkoudakis.gr/posts/ntuadt/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-07-19T00:00:00+00:00"><meta property="article:modified_time" content="2022-07-19T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="NTUA Digital Twin using FIWARE tools"><meta name=twitter:description content="I document how I utilized the FIWARE ecosystem to develop a Digital Twin for the NTUA Campus. I provide my work for disseminating knowledge about FIWARE under the Creative Commons Attribution-ShareAlike 4.0 International License.
Introduction # This paper documents the approach of Urban Water Management and Hydroinformatcs Group in NTUA to create a Digital Twin for the NTUA campus. We chose to employ the FIWARE tools ecosystem and apply the necessary technical glue for the assembly of a Digital Twin data representation of NTUA&rsquo;s campus environment."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"NTUA Digital Twin using FIWARE tools","headline":"NTUA Digital Twin using FIWARE tools","abstract":"I document how I utilized the FIWARE ecosystem to develop a Digital Twin for the NTUA Campus. I provide my work for disseminating knowledge about FIWARE under the Creative Commons Attribution-ShareAlike 4.0 International License.\nIntroduction # This paper documents the approach of Urban Water Management and Hydroinformatcs Group in NTUA to create a Digital Twin for the NTUA campus. We chose to employ the FIWARE tools ecosystem and apply the necessary technical glue for the assembly of a Digital Twin data representation of NTUA\u0026rsquo;s campus environment.","inLanguage":"en","url":"http:\/\/fragkoudakis.gr\/posts\/ntuadt\/","author":{"@type":"Person","name":"Christodoulos Fragkoudakis"},"copyrightYear":"2022","dateCreated":"2022-07-19T00:00:00\u002b00:00","datePublished":"2022-07-19T00:00:00\u002b00:00","dateModified":"2022-07-19T00:00:00\u002b00:00","keywords":["digital twins"],"mainEntityOfPage":"true","wordCount":"1557"}]</script><meta name=generator content="Hugo 0.101.0"><meta name=author content="Christodoulos Fragkoudakis"><link href=https://github.com/christodoulos rel=me><link href=https://www.linkedin.com/in/fragkoudakis/ rel=me><link href=https://twitter.com/CFragkoudakis rel=me><link href=https://www.facebook.com/christodoulos.fragkoudakis/ rel=me><script defer type=text/javascript src=/js/mermaid.bundle.2daab5322e59118ff2170664acfa53a075b6601b0a9ab9de487fc689e911b60a92e416041bc00acc6fdd8e51d702765a295068de4bd6bba9ec035ee454202271.js integrity="sha512-Laq1Mi5ZEY/yFwZkrPpToHW2YBsKmrneSH/GiekRtgqS5BYEG8AKzG/djlHXAnZaKVBo3kvWu6nsA17kVCAicQ=="></script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="flex justify-between py-6 font-semibold sm:items-center sm:py-10 text-neutral-900 dark:text-neutral"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Christodoulos Fragkoudakis</a></div><nav><ul class="flex flex-col list-none sm:flex-row"><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/about/ title="About Me">About</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Blog</a></li><li class="mb-1 ltr:text-right rtl:text-left sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Topics</a></li></ul></nav></header><main id=main-content class="relative grow"><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">NTUA Digital Twin using FIWARE tools</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-07-19 00:00:00 +0000 UTC">July 19, 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">8 mins</span></div><div class="my-1 text-xs text-neutral-500 dark:text-neutral-400"><a href=/tags/digital-twins/ class="px-1 py-[1px] border rounded-md border-neutral-200 dark:border-neutral-600 hover:border-primary-300 hover:text-primary-700 dark:hover:border-primary-600 dark:hover:text-primary-400">digital twins</a></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 lg:mt-3"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#introduction>Introduction</a></li><li><a href=#the-fiware-ecosystem>The FIWARE ecosystem</a><ul><li><a href=#installing-orion>Installing Orion</a><ul><li><a href=#creating-a-debian-service>Creating a Debian service</a></li></ul></li><li><a href=#the-smart-data-models-initiative>The Smart Data Models Initiative</a><ul><li><a href=#weather-smart-data>Weather Smart Data</a><ul><li><a href=#adding-the-first-orion-entity>Adding the first Orion Entity</a></li><li><a href=#adding-two-more-sensors>Adding two more sensors</a></li><li><a href=#adding-all-active-sensors>Adding all active sensors</a></li><li><a href=#establishing-continuous-orion-updates>Establishing continuous Orion updates</a></li></ul></li><li><a href=#public-transportation-smart-data>Public Transportation Smart Data</a></li></ul></li></ul></li><li><a href=#ckan-installation>CKAN Installation</a></li><li><a href=#cygnus-installation>Cygnus Installation</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p><a href=http://creativecommons.org/licenses/by-sa/4.0/><figure><img class="my-0 rounded-md" src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png alt=cc-by-sa-4></figure></a>I document how I utilized the <a href=https://www.fiware.org/>FIWARE</a> ecosystem to develop a Digital Twin for the NTUA Campus. I provide my work for disseminating knowledge about FIWARE under the <a href=http://creativecommons.org/licenses/by-sa/4.0/>Creative Commons Attribution-ShareAlike 4.0</a> International License.</p><h2 id=introduction class="relative group">Introduction <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#introduction aria-label=Anchor>#</a></span></h2><p>This paper documents the approach of <a href=https://uwmh.civil.ntua.gr/>Urban Water Management and Hydroinformatcs Group</a> in <a href=http://www.ntua.gr>NTUA</a> to create a Digital Twin for the NTUA campus. We chose to employ the <a href=https://www.fiware.org/>FIWARE</a> tools ecosystem and apply the necessary technical glue for the assembly of a Digital Twin data representation of NTUA&rsquo;s campus environment.</p><p>We combine information from many different sources, including a weather station, public transportation telemetry, energy consumption sensors, and programmable logic controller data from the municipal sewer mining installation for the watering of the municipal plant nursery. We constantly synchronize our databases with the data sources, and information is accessible in almost real-time. Almost real-time in the sense that the interval between the instants of time at which the data is gathered and made accessible is short enough for a current digital snapshot of the NTUA campus.</p><p>Various applications constantly process and analyze current data values and generated history over time.</p><h2 id=the-fiware-ecosystem class="relative group">The FIWARE ecosystem <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-fiware-ecosystem aria-label=Anchor>#</a></span></h2><p>There are a lot of available software technologies regarding possible approaches to a Digital Twin implementation. It was a fortunate coincidence that we could capitalize on our systems and network administration experience and immediately utilize the plethora of excellent tools and practices of the <a href=https://www.fiware.org/>FIWARE</a> ecosystem.</p><p>The heart of any Digital Twin implementation is a system for managing context information. The <a href=https://github.com/telefonicaid/fiware-orion/>Orion Context Broker</a> enables the management of context information in a highly decentralized and large-scale manner. It provides the FIWARE <a href=http://telefonicaid.github.io/fiware-orion/api/v2/stable/>NGSI v2 API</a> that allows updates, queries, or subscriptions to changes in context information.</p><h3 id=installing-orion class="relative group">Installing Orion <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#installing-orion aria-label=Anchor>#</a></span></h3><p>The FIWARE ecosystem generally has excellent and detailed documentation providing all the necessary steps for the immediate utilization of its components. We started by manually installing the Orion Context Broker on a <a href=https://www.debian.org>Debian</a> 11 virtual machine, following the installation <a href=https://fiware-orion.readthedocs.io/en/master/admin/build_source/index.html>instructions</a>. The installation process was straightforward and more or less as described in the instructions.</p><p>The described procedure for testing and coverage is also detailed, but there are minor glitches regarding the Python virtual environment for the functional tests. We improvised on-the-spot workarounds and installed the mandatory software for performing the available tests. Afterward, the testing process is extensive and requires time and patience. We successfully run the unit tests, but the functional and harness tests are numerous and take forever. We decided to stop the testing process and get back to it in case we run into problems during our Digital Twin development.</p><p>After the installation process, we started Orion and invoked the broker version message. The output was as described in the documentation and depicted various pieces of information about the installation.</p><pre tabindex=0><code>$ curl -X GET &#39;http://localhost:1026/version&#39;
</code></pre><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>{</span>
</span></span><span class=line><span class=cl>  <span class=nt>&#34;orion&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;version&#34;</span><span class=p>:</span> <span class=s2>&#34;3.7.0-next&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;uptime&#34;</span><span class=p>:</span> <span class=s2>&#34;1 d, 22 h, 44 m, 48 s&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;git_hash&#34;</span><span class=p>:</span> <span class=s2>&#34;fad1b89e34f708647adf034b746beba4c1bd63d8&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compile_time&#34;</span><span class=p>:</span> <span class=s2>&#34;Mon Jul 18 23:30:49 EEST 2022&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compiled_by&#34;</span><span class=p>:</span> <span class=s2>&#34;root&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;compiled_in&#34;</span><span class=p>:</span> <span class=s2>&#34;ntuadt-debian11&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;release_date&#34;</span><span class=p>:</span> <span class=s2>&#34;Mon Jul 18 23:30:49 EEST 2022&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;machine&#34;</span><span class=p>:</span> <span class=s2>&#34;x86_64&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;doc&#34;</span><span class=p>:</span> <span class=s2>&#34;https://fiware-orion.rtfd.io/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;libversions&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;boost&#34;</span><span class=p>:</span> <span class=s2>&#34;1_74&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;libcurl&#34;</span><span class=p>:</span> <span class=s2>&#34;libcurl/7.74.0 OpenSSL/1.1.1n zlib/1.2.11 brotli/1.0.9 libidn2/2.3.0 libpsl/0.21.0 (+libidn2/2.3.0) libssh2/1.9.0 nghttp2/1.43.0 librtmp/2.3&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;libmosquitto&#34;</span><span class=p>:</span> <span class=s2>&#34;2.0.12&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;libmicrohttpd&#34;</span><span class=p>:</span> <span class=s2>&#34;0.9.70&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;openssl&#34;</span><span class=p>:</span> <span class=s2>&#34;1.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;rapidjson&#34;</span><span class=p>:</span> <span class=s2>&#34;1.1.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;mongoc&#34;</span><span class=p>:</span> <span class=s2>&#34;1.17.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;bson&#34;</span><span class=p>:</span> <span class=s2>&#34;1.17.4&#34;</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span></code></pre></div><p>Currently, the only possible way to interact with Orion is using an HTTP client from localhost. Orion listens to incoming requests at port 1026 and interacts with <a href=https://www.mongodb.com/>MongoDB</a> at localhost at port 27017.</p><div class=mermaid align=center>flowchart LR
CURL[HTTP client] <---> |1026:1026| ORION[Orion<br>Context<br>Broker]
ORION <---> |27017:27017| MONGO[(MongoDB)]
style ORION fill:#f9f,stroke:#333,stroke-width:4px</div><h4 id=creating-a-debian-service class="relative group">Creating a Debian service <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#creating-a-debian-service aria-label=Anchor>#</a></span></h4><p>In order to install Orion as a Debian service, we have to create a user and a file in the appropriate system directory.</p><pre tabindex=0><code>$ sudo useradd -M orion
$ sudo usermod -L orion
$ sudo vim /etc/systemd/system/contextBroker.service
</code></pre><p>We need at least the following setup:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=k>[Unit]</span>
</span></span><span class=line><span class=cl><span class=na>Description</span><span class=o>=</span><span class=s>Orion Context Broker Service</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Service]</span>
</span></span><span class=line><span class=cl><span class=na>User</span><span class=o>=</span><span class=s>orion</span>
</span></span><span class=line><span class=cl><span class=na>ExecStart</span><span class=o>=</span><span class=s>contextBroker</span>
</span></span><span class=line><span class=cl><span class=na>Restart</span><span class=o>=</span><span class=s>always</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Install]</span>
</span></span><span class=line><span class=cl><span class=na>WantedBy</span><span class=o>=</span><span class=s>multi-user.target</span>
</span></span></code></pre></div><p>Finally enable and start the new service:</p><pre tabindex=0><code>$ sudo systemctl daemon-reload
$ sudo systemctl enable contextBroker.service
$ sudo systemctl start contextBroker.service
$ sudo systemctl status contextBroker.service
</code></pre><p>The outcome must be something like:</p><pre tabindex=0><code>● contextBroker.service - Orion Context Broker Service
     Loaded: loaded (/etc/systemd/system/contextBroker.service; enabled; vendor preset: enabled)
     Active: active (running) since Tue 2022-07-19 10:09:06 EEST; 3 days ago
   Main PID: 437 (contextBroker)
      Tasks: 4 (limit: 19172)
     Memory: 14.6M
        CPU: 4.100s
     CGroup: /system.slice/contextBroker.service
             └─437 contextBroker

Jul 19 10:09:06 ntuadt-debian11 systemd[1]: Started Orion Context Broker Service.
</code></pre><h3 id=the-smart-data-models-initiative class="relative group">The Smart Data Models Initiative <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#the-smart-data-models-initiative aria-label=Anchor>#</a></span></h3><p>FIWARE Foundation, TM Forum, IUDX, and OASC lead a <a href=https://www.fiware.org/smart-data-models/>collaborative initiative</a> to support the adoption of a reference architecture and compatible standard data models. A Smart Data Model includes the technical representation that defines the specialized data types and structure, a human-readable specification, and examples of the payloads for NGSI v2 API calls.</p><p>On the NTUA campus, there are several data sources for our Digital Twin proof of concept. There are two weather stations, public transportation telemetry, public transportation static data, and building energy consumption telemetry. Around the corner of NTUA&rsquo;s campus is a sewer mining facility for watering the municipal plant nursery. The facility&rsquo;s programmable logic controller provides real-time data for the proper operation of the hardware of the sewer mining unit. Qualitative data from the produced water chemical analysis are available weekly from the <a href=https://www.eydap.gr/en/>EYDAP</a> laboratories.</p><h4 id=weather-smart-data class="relative group">Weather Smart Data <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#weather-smart-data aria-label=Anchor>#</a></span></h4><p>The Smart Data Models initiative already includes data models for entities dealing with weather data. The models are primarily associated with entities regarding vertical segments of the environment and agriculture, but we found the WeatherObserved model applicable for describing the NTUA&rsquo;s weather station entities.</p><p>The <a href=https://github.com/smart-data-models/dataModel.Weather/blob/master/WeatherObserved/doc/spec.md>WeatherObserved</a> data model describes an observation of weather conditions at a particular place and time. Mobile operators and the <a href=https://www.gsma.com/>GSMA</a> developed the data model in cooperation with FIWARE et al.</p><h5 id=adding-the-first-orion-entity class="relative group">Adding the first Orion Entity <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#adding-the-first-orion-entity aria-label=Anchor>#</a></span></h5><p>The <a href=https://openmeteo.org/>OpenMeteo.org</a> website provides a web service for disseminating free meteorological data. The <a href="https://www.hydro.ntua.gr/?set_language=en">Department of Water Resources and Environmental Engineering</a> in NTUA owns the <a href=https://openmeteo.org/stations/1334/>ITIA</a> weather station located SE at the NTUA&rsquo;s campus perimeter. Let us describe the process of creating an Orion entity for a <a href=https://openmeteo.org/api/stations/1334/timeseriesgroups/564/timeseries/232/bottom/>particular</a> temperature sensor.</p><p>The following is a simple Python program that populates an Orion Entity representing that exact temperature sensor. The payload function returns the appropriate data structure following the <a href=https://github.com/smart-data-models/dataModel.Weather/blob/master/WeatherObserved/doc/spec.md>WeatherObserved</a> data model. We use the Python <a href=https://pypi.org/project/requests/>requests</a> module for our early interactions with the OpenMeteo.org web service and the just installed Orion Context Broker.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>import</span> <span class=nn>requests</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>datetime</span> <span class=kn>import</span> <span class=n>datetime</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>open_meteo_url_prefix</span> <span class=o>=</span> <span class=s2>&#34;https://openmeteo.org/api/stations/1334/timeseriesgroups&#34;</span>
</span></span><span class=line><span class=cl><span class=n>orion_url</span> <span class=o>=</span> <span class=s2>&#34;http://localhost:1026/v2/entities&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>open_meteo_response</span><span class=p>(</span><span class=n>res</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rlist</span> <span class=o>=</span> <span class=n>res</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;,&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>timestamp</span> <span class=o>=</span> <span class=n>datetime</span><span class=o>.</span><span class=n>strptime</span><span class=p>(</span><span class=n>rlist</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=s2>&#34;%Y-%m-</span><span class=si>%d</span><span class=s2> %H:%M&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>measurement</span> <span class=o>=</span> <span class=n>rlist</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>timestamp</span><span class=p>,</span> <span class=n>measurement</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>payload</span><span class=p>(</span><span class=n>sensor_id</span><span class=p>,</span> <span class=n>sensor_name</span><span class=p>,</span> <span class=n>timeseries_id</span><span class=p>,</span> <span class=n>timestamp</span><span class=p>,</span> <span class=n>measurement</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;id&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;urn:ngsi-ld:NTUA:ITIA:</span><span class=si>{</span><span class=n>sensor_name</span><span class=si>}</span><span class=s2>:</span><span class=si>{</span><span class=n>sensor_id</span><span class=si>}</span><span class=s2>&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;WeatherObserved&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;address&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;PostalAddress&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;addressCountry&#34;</span><span class=p>:</span> <span class=s2>&#34;Greece&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;addressLocality&#34;</span><span class=p>:</span> <span class=s2>&#34;Zografou Campus&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;addressRegion&#34;</span><span class=p>:</span> <span class=s2>&#34;Attica&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;postalCode&#34;</span><span class=p>:</span> <span class=s2>&#34;15780&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                <span class=s2>&#34;streetAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;9, Iroon Polytechniou str&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;location&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;geo:json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span> <span class=s2>&#34;coordinates&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mf>37.97385</span><span class=p>,</span> <span class=mf>23.78743</span><span class=p>]},</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;dateObserved&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;DateTime&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=n>timestamp</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;source&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>open_meteo_url_prefix</span><span class=si>}</span><span class=s2>/</span><span class=si>{</span><span class=n>sensor_id</span><span class=si>}</span><span class=s2>/timeseries/</span><span class=si>{</span><span class=n>timeseries_id</span><span class=si>}</span><span class=s2>/bottom/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;name&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Text&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=n>sensor_name</span><span class=p>},</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;temperature&#34;</span><span class=p>:</span> <span class=p>{</span><span class=s2>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Number&#34;</span><span class=p>,</span> <span class=s2>&#34;value&#34;</span><span class=p>:</span> <span class=n>measurement</span><span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>open_meteo_url_prefix</span><span class=si>}</span><span class=s2>/564/timeseries/232/bottom/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_timestamp</span><span class=p>,</span> <span class=n>_measurement</span> <span class=o>=</span> <span class=n>open_meteo_response</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_payload</span> <span class=o>=</span> <span class=n>payload</span><span class=p>(</span><span class=mi>564</span><span class=p>,</span> <span class=s2>&#34;temprerature-sensor&#34;</span><span class=p>,</span> <span class=mi>232</span><span class=p>,</span> <span class=n>_timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span> <span class=n>_measurement</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>orion_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>_payload</span><span class=p>)</span>
</span></span></code></pre></div><p>Let us ask Orion to deliver all its entities:</p><pre tabindex=0><code>$ curl -X GET &#39;http://localhost:1026/v2/entities&#39; | python3 -m json.tool
</code></pre><p>The response is the following JSON data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;urn:ngsi-ld:NTUA:ITIA:temprerature-sensor:564&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;WeatherObserved&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;address&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;PostalAddress&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;addressCountry&#34;</span><span class=p>:</span> <span class=s2>&#34;Greece&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;addressLocality&#34;</span><span class=p>:</span> <span class=s2>&#34;Zografou Campus&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;addressRegion&#34;</span><span class=p>:</span> <span class=s2>&#34;Attica&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;postalCode&#34;</span><span class=p>:</span> <span class=s2>&#34;15780&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;streetAddress&#34;</span><span class=p>:</span> <span class=s2>&#34;9, Iroon Polytechniou str&#34;</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;dateObserved&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;DateTime&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;2022-07-22T17:19:00.000Z&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;location&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;geo:json&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Point&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>        <span class=nt>&#34;coordinates&#34;</span><span class=p>:</span> <span class=p>[</span><span class=mf>37.97385</span><span class=p>,</span> <span class=mf>23.78743</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=p>},</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;name&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;temprerature-sensor&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;source&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Text&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;https://openmeteo.org/api/stations/1334/timeseriesgroups/564/timeseries/232/bottom/&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>},</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;temperature&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;34.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Compare the above response to the simple line returned from the direct access of the sensor&rsquo;s last measurement <a href=https://openmeteo.org/api/stations/1334/timeseriesgroups/564/timeseries/232/bottom/>URL</a>. Orion delivers the <strong>full context</strong> of the sensor&rsquo;s measurement, i.e., its address, its exact geographic location, its postal address, its description, its source, and of course, its measurement.</p><h5 id=adding-two-more-sensors class="relative group">Adding two more sensors <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#adding-two-more-sensors aria-label=Anchor>#</a></span></h5><p>Following the exact steps above, we add two more sensors: another <a href=https://openmeteo.org/api/stations/1334/timeseriesgroups/499/timeseries/247/bottom/>temperature</a> sensor and a <a href=https://openmeteo.org/api/stations/1334/timeseriesgroups/669/timeseries/5461/bottom/>barometric</a> pressure sensor.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=c1># Another temperature sensor</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>open_meteo_url_prefix</span><span class=si>}</span><span class=s2>/499/timeseries/247/bottom/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_timestamp</span><span class=p>,</span> <span class=n>_measurement</span> <span class=o>=</span> <span class=n>open_meteo_response</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_payload</span> <span class=o>=</span> <span class=n>payload</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=mi>499</span><span class=p>,</span> <span class=s2>&#34;temprerature-sensor&#34;</span><span class=p>,</span> <span class=mi>247</span><span class=p>,</span> <span class=n>_timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span> <span class=n>_measurement</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>orion_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>_payload</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># A baromatric pressure sensor</span>
</span></span><span class=line><span class=cl><span class=c1># (before posting we need to adjust accordingly the payload function)</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>get</span><span class=p>(</span><span class=sa>f</span><span class=s2>&#34;</span><span class=si>{</span><span class=n>open_meteo_url_prefix</span><span class=si>}</span><span class=s2>/669/timeseries/5461/bottom/&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_timestamp</span><span class=p>,</span> <span class=n>_measurement</span> <span class=o>=</span> <span class=n>open_meteo_response</span><span class=p>(</span><span class=n>r</span><span class=o>.</span><span class=n>text</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>_payload</span> <span class=o>=</span> <span class=n>payload</span><span class=p>(</span>
</span></span><span class=line><span class=cl>    <span class=mi>669</span><span class=p>,</span> <span class=s2>&#34;barometric-pressure-sensor&#34;</span><span class=p>,</span> <span class=mi>5461</span><span class=p>,</span> <span class=n>_timestamp</span><span class=o>.</span><span class=n>isoformat</span><span class=p>(),</span> <span class=n>_measurement</span>
</span></span><span class=line><span class=cl><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>r</span> <span class=o>=</span> <span class=n>requests</span><span class=o>.</span><span class=n>post</span><span class=p>(</span><span class=n>orion_url</span><span class=p>,</span> <span class=n>json</span><span class=o>=</span><span class=n>_payload</span><span class=p>)</span>
</span></span></code></pre></div><p>Let us retrieve from Orion only the temperature sensor entities, asking only for the measurement context.</p><pre tabindex=0><code>$ curl -X GET &#39;http://localhost:1026/v2/entities?idPattern=urn:ngsi-ld:NTUA:ITIA:temprerature.*&amp;attrs=temperature&#39; | python3 -m json.tool
</code></pre><p>The response is the following JSON data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;urn:ngsi-ld:NTUA:ITIA:temprerature-sensor:564&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;WeatherObserved&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;temperature&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;34.4&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>},</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;urn:ngsi-ld:NTUA:ITIA:temprerature-sensor:499&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;WeatherObserved&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;temperature&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;33.0&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><p>Asking for the barometric sensor measurement context:</p><pre tabindex=0><code>$ curl -X GET &#39;http://147.102.152.138:1026/v2/entities?idPattern=urn:ngsi-ld:NTUA:ITIA:barometric.*&amp;attrs=atmosphericPressure&#39; | python3 -m json.tool
</code></pre><p>The response is the following JSON data:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-json data-lang=json><span class=line><span class=cl><span class=p>[</span>
</span></span><span class=line><span class=cl>  <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;id&#34;</span><span class=p>:</span> <span class=s2>&#34;urn:ngsi-ld:NTUA:ITIA:barometric-pressure-sensor:669&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;WeatherObserved&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>    <span class=nt>&#34;atmosphericPressure&#34;</span><span class=p>:</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;type&#34;</span><span class=p>:</span> <span class=s2>&#34;Number&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;value&#34;</span><span class=p>:</span> <span class=s2>&#34;989.1&#34;</span><span class=p>,</span>
</span></span><span class=line><span class=cl>      <span class=nt>&#34;metadata&#34;</span><span class=p>:</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>  <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span></code></pre></div><h5 id=adding-all-active-sensors class="relative group">Adding all active sensors <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#adding-all-active-sensors aria-label=Anchor>#</a></span></h5><p>&mldr; TO BE ADDED &mldr;</p><h5 id=establishing-continuous-orion-updates class="relative group">Establishing continuous Orion updates <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#establishing-continuous-orion-updates aria-label=Anchor>#</a></span></h5><p>&mldr; TO BE ADDED &mldr;</p><h4 id=public-transportation-smart-data class="relative group">Public Transportation Smart Data <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#public-transportation-smart-data aria-label=Anchor>#</a></span></h4><p>&mldr; TO BE ADDED &mldr;</p><h2 id=ckan-installation class="relative group">CKAN Installation <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#ckan-installation aria-label=Anchor>#</a></span></h2><ol><li><a href=http://docs.ckan.org/en/2.9/maintaining/installing/install-from-package.html>ckan package installation</a></li><li><a href=http://docs.ckan.org/en/2.9/maintaining/datastore.html>datastore extension</a></li><li><a href=http://docs.ckan.org/en/2.9/maintaining/filestore.html>FileStore and file uploads</a></li><li><a href=http://docs.ckan.org/en/2.9/maintaining/getting-started.html#create-admin-user>Creating a sysadmin user</a></li></ol><h2 id=cygnus-installation class="relative group">Cygnus Installation <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#cygnus-installation aria-label=Anchor>#</a></span></h2><p><a href=http://creativecommons.org/licenses/by-sa/4.0/><figure><img class="my-0 rounded-md" src=https://i.creativecommons.org/l/by-sa/4.0/88x31.png alt=cc-by-sa-4></figure></a></p></div></section><footer class="pt-8 max-w-prose"><div class=flex><img class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full" width=96 height=96 alt=Author src=/img/me_hu05298c82ebb397db8a1b138ab2bc5172_488504_192x192_fill_q75_box_smart1.jpg><div class=place-self-center><div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Christodoulos Fragkoudakis</div><div class="text-sm text-neutral-700 dark:text-neutral-400">A nerd, too old to grow up</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/christodoulos target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.linkedin.com/in/fragkoudakis/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin" class="svg-inline--fa fa-linkedin fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/CFragkoudakis target=_blank aria-label=Twitter rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.facebook.com/christodoulos.fragkoudakis/ target=_blank aria-label=Facebook rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group" href=/posts/angular/angular-tips/><span class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Random Angular Tips</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-05-26 00:00:00 +0000 UTC">May 26, 2022</time></span></span></a></span>
<span></span></div></div></footer></article><div class="absolute top-[110vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-[-5.5rem]"><a href=#the-top class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class=py-10><div class="flex justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Christodoulos Fragkoudakis</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"><button id=appearance-switcher class="w-12 h-12" type=button title="Switch to dark appearance">
<span class="inline dark:hidden"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon" class="svg-inline--fa fa-moon fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M283.211 512c78.962.0 151.079-35.925 198.857-94.792 7.068-8.708-.639-21.43-11.562-19.35-124.203 23.654-238.262-71.576-238.262-196.954.0-72.222 38.662-138.635 101.498-174.394 9.686-5.512 7.25-20.197-3.756-22.23A258.156 258.156.0 00283.211.0c-141.309.0-256 114.511-256 256 0 141.309 114.511 256 256 256z"/></svg></span></span><span class="hidden dark:inline"><span class="relative inline-block align-text-bottom icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 160c-52.9.0-96 43.1-96 96s43.1 96 96 96 96-43.1 96-96-43.1-96-96-96zm246.4 80.5-94.7-47.3 33.5-100.4c4.5-13.6-8.4-26.5-21.9-21.9l-100.4 33.5-47.4-94.8c-6.4-12.8-24.6-12.8-31 0l-47.3 94.7L92.7 70.8c-13.6-4.5-26.5 8.4-21.9 21.9l33.5 100.4-94.7 47.4c-12.8 6.4-12.8 24.6.0 31l94.7 47.3-33.5 100.5c-4.5 13.6 8.4 26.5 21.9 21.9l100.4-33.5 47.3 94.7c6.4 12.8 24.6 12.8 31 0l47.3-94.7 100.4 33.5c13.6 4.5 26.5-8.4 21.9-21.9l-33.5-100.4 94.7-47.3c13-6.5 13-24.7.2-31.1zm-155.9 106c-49.9 49.9-131.1 49.9-181 0s-49.9-131.1.0-181 131.1-49.9 181 0 49.9 131.1.0 181z"/></svg></span></span></button></div></div></footer></body></html>