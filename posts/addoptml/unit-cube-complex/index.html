<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=light data-auto-appearance=true><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>On determining the outer shell of a unit cube complex &#183; Christodoulos Fragkoudakis</title><meta name=title content="On determining the outer shell of a unit cube complex &#183; Christodoulos Fragkoudakis"><link rel=canonical href=http://fragkoudakis.gr/posts/addoptml/unit-cube-complex/><link type=text/css rel=stylesheet href=/css/main.bundle.min.c0ce4c174a2875c03e13b6d92fe3b390d78e4eda02cb9f75507e18344e239d01577fbdb5697d34f694135de4b93d4f60211d7d0728a3f5dbcb357ee9034dca4b.css integrity="sha512-wM5MF0oodcA+E7bZL+OzkNeOTtoCy591UH4YNE4jnQFXf721aX009pQTXeS5PU9gIR19Byij9dvLNX7pA03KSw=="><script type=text/javascript src=/js/appearance.min.badab316c9287a5a42a843e4eb45da65bb3d194a5a0f5fa4a3e516160e67df0b8c65f4f19a8e146436e29d583699e6cb41d6bbe99e05e1dbaa877763bad9f8e2.js integrity="sha512-utqzFskoelpCqEPk60XaZbs9GUpaD1+ko+UWFg5n3wuMZfTxmo4UZDbinVg2mebLQda76Z4F4duqh3djutn44g=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.9947db70e5b36e741e53f8531bd734741b3fc7a688f7b5d749fc5433c48efc252f47bdf44e471570a550fc051b87712799014040e6349b38d64448b94e84e45a.js integrity="sha512-mUfbcOWzbnQeU/hTG9c0dBs/x6aI97XXSfxUM8SO/CUvR730TkcVcKVQ/AUbh3EnmQFAQOY0mzjWREi5ToTkWg==" data-copy=Copy data-copied=Copied></script>
<link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><meta property="og:title" content="On determining the outer shell of a unit cube complex"><meta property="og:description" content="Christodoulos Fragkoudakis and Markos Karampatsis
This report results from our research and development during our secondment in IDEA75 between 1/6/2021 and 31/11/2021. Our work program was “WP1” “Development of topology-sizing design optimization methodology incorporating nonlinear FEM analyses and machine learning” as described in Annex 1 of the Grant Agreement.
A Python class for 3D Points # We will assemble a python class that represents 3D points and supports basic operations between its instances."><meta property="og:type" content="article"><meta property="og:url" content="http://fragkoudakis.gr/posts/addoptml/unit-cube-complex/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-15T00:00:00+00:00"><meta property="article:modified_time" content="2021-12-15T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="On determining the outer shell of a unit cube complex"><meta name=twitter:description content="Christodoulos Fragkoudakis and Markos Karampatsis
This report results from our research and development during our secondment in IDEA75 between 1/6/2021 and 31/11/2021. Our work program was “WP1” “Development of topology-sizing design optimization methodology incorporating nonlinear FEM analyses and machine learning” as described in Annex 1 of the Grant Agreement.
A Python class for 3D Points # We will assemble a python class that represents 3D points and supports basic operations between its instances."><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Posts","name":"On determining the outer shell of a unit cube complex","headline":"On determining the outer shell of a unit cube complex","abstract":"Christodoulos Fragkoudakis and Markos Karampatsis\nThis report results from our research and development during our secondment in IDEA75 between 1\/6\/2021 and 31\/11\/2021. Our work program was “WP1” “Development of topology-sizing design optimization methodology incorporating nonlinear FEM analyses and machine learning” as described in Annex 1 of the Grant Agreement.\nA Python class for 3D Points # We will assemble a python class that represents 3D points and supports basic operations between its instances.","inLanguage":"en","url":"http:\/\/fragkoudakis.gr\/posts\/addoptml\/unit-cube-complex\/","author":{"@type":"Person","name":"Christodoulos Fragkoudakis"},"copyrightYear":"2021","dateCreated":"2021-12-15T00:00:00\u002b00:00","datePublished":"2021-12-15T00:00:00\u002b00:00","dateModified":"2021-12-15T00:00:00\u002b00:00","mainEntityOfPage":"true","wordCount":"3593"}]</script><meta name=author content="Christodoulos Fragkoudakis"><link href=https://github.com/christodoulos rel=me><link href=https://www.linkedin.com/in/fragkoudakis/ rel=me><link href=https://twitter.com/CFragkoudakis rel=me><link href=https://www.facebook.com/christodoulos.fragkoudakis/ rel=me><link type=text/css rel=stylesheet href=/lib/katex/katex.min.61fc68ef35c6690632cd6371cfcaf8b3c6b135f1b88d2ddd8a9b3ca761c0ff03569ae6a96a49108a48befd7037a373a5fa2f16234ddc4495430d412512d103ea.css integrity="sha512-Yfxo7zXGaQYyzWNxz8r4s8axNfG4jS3dips8p2HA/wNWmuapakkQiki+/XA3o3Ol+i8WI03cRJVDDUElEtED6g=="><script defer src=/lib/katex/katex.min.33bfe3919a0a1259f58da698daba022bd26de2dfa3fe2aeed1edaf2270e454ee4b634101b779baead8d34f95c5b061f62c91be55144bdae7884775347ebb3f19.js integrity="sha512-M7/jkZoKEln1jaaY2roCK9Jt4t+j/iru0e2vInDkVO5LY0EBt3m66tjTT5XFsGH2LJG+VRRL2ueIR3U0frs/GQ=="></script>
<script defer src=/lib/katex/auto-render.min.640fd13eb028f3c0e5c119e7a0d56a28836740d716111cd12b4dcf0da038188262559bc61485906dd582b1479b3197e45a88677e782c0e35f353a3e890ee231b.js integrity="sha512-ZA/RPrAo88DlwRnnoNVqKINnQNcWERzRK03PDaA4GIJiVZvGFIWQbdWCsUebMZfkWohnfngsDjXzU6PokO4jGw==" onload=renderMathInElement(document.body)></script></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 bg-neutral text-neutral-900 sm:px-14 md:px-24 lg:px-32 dark:bg-neutral-800 dark:text-neutral max-w-7xl"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 dark:bg-neutral-600 focus:translate-y-0" href=#main-content><span class="font-bold ltr:pr-2 rtl:pl-2 text-primary-600 dark:text-primary-400">&darr;</span>Skip to main content</a></div><header class="py-6 font-semibold sm:py-10 text-neutral-900 dark:text-neutral print:hidden"><nav class="flex justify-between"><div><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" rel=me href=/>Christodoulos Fragkoudakis</a></div><ul class="flex flex-col list-none ltr:text-right rtl:text-left sm:flex-row"><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/about/ title="About Me">About</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/posts/ title=Posts>Blog</a></li><li class="mb-1 sm:mb-0 ltr:sm:mr-7 ltr:sm:last:mr-0 rtl:sm:ml-7 rtl:sm:last:ml-0"><a class="decoration-primary-500 hover:underline hover:decoration-2 hover:underline-offset-2" href=/tags/ title=Tags>Topics</a></li></ul></nav></header><div class="relative flex flex-col grow"><main id=main-content class=grow><article><header class=max-w-prose><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">On determining the outer shell of a unit cube complex</h1><div class="mt-8 mb-12 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2021-12-15 00:00:00 +0000 UTC">December 15, 2021</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">17 mins</span></div><div class="my-1 text-xs text-neutral-500 dark:text-neutral-400"></div></div></header><section class="flex flex-col max-w-full mt-0 prose lg:flex-row dark:prose-invert"><div class="order-first px-0 lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8 lg:order-last"><div class="ltr:pl-5 rtl:pr-5 toc lg:sticky lg:top-10 print:hidden"><details open class="mt-0 overflow-hidden rounded-lg rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5"><summary class="block py-1 text-lg font-semibold cursor-pointer rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 text-neutral-800 dark:text-neutral-100 lg:hidden bg-neutral-100 dark:bg-neutral-700">Table of Contents</summary><div class="py-2 border-dotted ltr:border-l rtl:border-r rtl:pr-5 ltr:pl-5 ltr:-ml-5 rtl:-mr-5 border-neutral-300 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#a-python-class-for-3d-points>A Python class for 3D Points</a></li><li><a href=#a-python-class-for-3d-vectors>A Python class for 3D Vectors</a></li><li><a href=#unit-cube-complexes>Unit cube complexes</a></li><li><a href=#a-python-class-for-unit-cubes>A Python class for unit cubes</a></li><li><a href=#a-python-class-for-cuboid-complexes>A Python class for cuboid complexes</a></li><li><a href=#test-cases-of-unit-cube-complexes>Test cases of unit cube complexes</a><ul><li><a href=#a-cube>A cube</a></li><li><a href=#two-cubes-side-by-side>Two cubes side by side</a></li><li><a href=#four-cubes-side-by-side>Four cubes side by side</a></li><li><a href=#three-connected-columns>Three connected columns</a></li></ul></li><li><a href=#converting-the-nodes-connectivity-density-representation-to-python-lists>Converting the nodes, connectivity, density representation to Python lists</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>Christodoulos Fragkoudakis and Markos Karampatsis</p><blockquote><p>This report results from our research and development during our secondment in IDEA75 between 1/6/2021 and 31/11/2021. Our work program was “WP1” “Development of topology-sizing design optimization methodology incorporating nonlinear FEM analyses and machine learning” as described in Annex 1 of the Grant Agreement.</p></blockquote><h2 id=a-python-class-for-3d-points class="relative group">A Python class for 3D Points <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#a-python-class-for-3d-points aria-label=Anchor>#</a></span></h2><p>We will assemble a python class that represents 3D points and supports basic operations between its instances. We initialize an object of the Point class using three parameters, x, y, and z, the respective cartesian coordinates. The “coordinates” class property returns a three-valued Python tuple comprising the x, y, and z coordinates. We define two more methods to initialize the class, the <code>from_point</code> method that initializes a point instance from another point instance and the <code>from_tuple</code> method that initializes a point instance from a three-valued Python tuple. We represent a Point instance using the respective <code>Point(x,y,z)</code> string and define the <code>_hash_</code> function that ensures that two equal Point instances always return the same values.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Point</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;A class for 3D points&#34;</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>=</span> <span class=n>x</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>=</span> <span class=n>y</span>
</span></span><span class=line><span class=cl>    <span class=bp>self</span><span class=o>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>z</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>from_point</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>point</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Initializes a 3D point from another point&#34;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=n>point</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>point</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>point</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@classmethod</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>from_tuple</span><span class=p>(</span><span class=bp>cls</span><span class=p>,</span> <span class=n>tup</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Initializes a 3D point from a tuple of 3 values&#34;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=bp>cls</span><span class=p>(</span><span class=n>tup</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>tup</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>tup</span><span class=p>[</span><span class=mi>2</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nd>@property</span>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=nf>coordinates</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Returns the coordinates of the 3D point&#34;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=s1>&#39;Point(</span><span class=si>{0}</span><span class=s1>,</span><span class=si>{1}</span><span class=s1>,</span><span class=si>{2}</span><span class=s1>)&#39;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__hash__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=nb>hash</span><span class=p>((</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>))</span>
</span></span></code></pre></div><p>Three-dimensional points, i.e., instances of the Point class, have the usual ordering according to their “coordinates” property. Two Point instances are equal if their coordinates tuples are equal, accordingly when they are not equal. A Point instance is “less” than another instance if the corresponding tuples have the exact ordering, respectively, when a Point instance is “greater” than another instance. We utilize Python tuples that inherently support lexicographic order to implement the above reasoning.</p><p>Our Point class supports coordinate iteration by the <code>__iter__</code> function, while positional coordinate getting and setting are possible, using the <code>__getitem__</code> and <code>__setitem__</code> functions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl> <span class=k>def</span> <span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=ow>not</span> <span class=n>other</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>==</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__ne__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=ow>not</span> <span class=n>other</span><span class=p>:</span>
</span></span><span class=line><span class=cl>          <span class=k>return</span> <span class=kc>True</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>!=</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__lt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>&lt;</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__gt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>&gt;</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__le__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__ge__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__getitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)[</span><span class=n>index</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__setitem__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>index</span><span class=p>,</span> <span class=n>value</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=n>temp</span> <span class=o>=</span> <span class=p>[</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>]</span>
</span></span><span class=line><span class=cl>      <span class=n>temp</span><span class=p>[</span><span class=n>index</span><span class=p>]</span> <span class=o>=</span> <span class=n>value</span>
</span></span><span class=line><span class=cl>      <span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span> <span class=o>=</span> <span class=n>temp</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__iter__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=k>yield</span> <span class=bp>self</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>      <span class=k>yield</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>      <span class=k>yield</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl> <span class=k>def</span> <span class=fm>__sub__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Subtracts two points giving the vector that anslates other to self.&#34;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>Vector</span><span class=p>(</span><span class=n>other</span><span class=o>.</span><span class=n>x</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>y</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>other</span><span class=o>.</span><span class=n>z</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>def</span> <span class=fm>__add__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vector</span><span class=p>):</span>
</span></span><span class=line><span class=cl>      <span class=s2>&#34;Translates self to another points using &#39;vector&#39; vector&#34;</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>+</span> <span class=n>vector</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>+</span> <span class=n>vector</span><span class=o>.</span><span class=n>y</span><span class=p>,</span>
</span></span><span class=line><span class=cl>                   <span class=bp>self</span><span class=o>.</span><span class=n>z</span> <span class=o>+</span> <span class=n>vector</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span></code></pre></div><p>Finally, our Point class supports subtraction between its instances and adding a Vector instance (to be defined later) to a Point instance. If we subtract two Point instances, we get the Vector that translates the first instance to the second. If we add a Vector instance to a Point instance, we get the translated Point instance.</p><h2 id=a-python-class-for-3d-vectors class="relative group">A Python class for 3D Vectors <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#a-python-class-for-3d-vectors aria-label=Anchor>#</a></span></h2><p>Our Python class for 3D Vectors inherits the Point class and implements the essential property of magnitude. Notice that there is no need to employ a costly square root operation as two vectors have the same extent if the respective squared number is the same for both. Our class also supports the cross-product operation between two instances by a straightforward calculation of 6 multiplications and three additions.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Vector</span><span class=p>(</span><span class=n>Point</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;A class for 3D Vectors&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=o>*</span><span class=n>args</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=ow>not</span> <span class=n>args</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>==</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=vm>__class__</span> <span class=ow>is</span> <span class=n>Point</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span><span class=o>.</span><span class=n>z</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>elif</span> <span class=nb>len</span><span class=p>(</span><span class=n>args</span><span class=p>)</span> <span class=o>==</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>args</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>args</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>args</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>coords</span> <span class=o>=</span> <span class=p>[</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=nb>super</span><span class=p>(</span><span class=n>Vector</span><span class=p>,</span> <span class=bp>self</span><span class=p>)</span><span class=o>.</span><span class=fm>__init__</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=s2>&#34;Vector(</span><span class=si>{1}</span><span class=s2>,</span><span class=si>{2}</span><span class=s2>,</span><span class=si>{3}</span><span class=s2>)&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>magnitude2</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Returns the squared magnitude of the vector.&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>x</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span><span class=o>**</span><span class=mi>2</span> <span class=o>+</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span><span class=o>**</span><span class=mi>2</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>cross</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vector</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Returns the cross product of self and vector&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Vector</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>z</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>y</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>z</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>x</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>z</span><span class=p>),</span>
</span></span><span class=line><span class=cl>            <span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>x</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>y</span> <span class=o>-</span> <span class=bp>self</span><span class=o>.</span><span class=n>y</span> <span class=o>*</span> <span class=n>vector</span><span class=o>.</span><span class=n>x</span><span class=p>))</span>
</span></span></code></pre></div><p>An example usage of the Point and Vector classes in the Python interpreter is the following:</p><pre tabindex=0><code>&gt;&gt;&gt; from ucc2stl import Point, Vector
&gt;&gt;&gt; x = Point(1,2,3)
&gt;&gt;&gt; y = Point(4,5,6)
&gt;&gt;&gt; x-y
Vector(3,3,3)
&gt;&gt;&gt; z = Vector(3,3,3)
&gt;&gt;&gt; x+z
Point(4,5,6)
</code></pre><h2 id=unit-cube-complexes class="relative group">Unit cube complexes <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#unit-cube-complexes aria-label=Anchor>#</a></span></h2><p>The traditional Finite Element approach discretizes a continuous orthogonal domain into more minor elements of a specific shape. We consider unit cube complexes produced by various finite element analysis models. The constructed complexes are dense, and to 3D print them, we need to determine their outer shell, i.e., to calculate the complex&rsquo;s surface geometry.</p><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/ucc_hu3620198b7ac5c61f41eadb799647bc90_9780_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/ucc_hu3620198b7ac5c61f41eadb799647bc90_9780_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/ucc_hu3620198b7ac5c61f41eadb799647bc90_9780_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/ucc_hu3620198b7ac5c61f41eadb799647bc90_9780_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/ucc_hu3620198b7ac5c61f41eadb799647bc90_9780_660x0_resize_box_3.png alt><figcaption>A unit cube complex</figcaption></figure></p><p>The unit cube complex&rsquo;s surface is already a tesselation comprised of rectangles that have no overlaps or leave no gaps. Our purpose is to employ the STL file format specification, which is to tessellate the outer surface of the complex using triangles and store information about the triangles in a file. For example, the unit cube in the following image has two triangles per face, and since the cube has six faces, it adds up to twelve triangles. Many small triangles can also cover a 3D model of a sphere with a corresponding STL representation. Curved objects are out of the scope of our research, so that we will stick to rectangular constructions.</p><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/tesselation_hu52df91dbc40e3642fab85fe9999b9017_76869_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/tesselation_hu52df91dbc40e3642fab85fe9999b9017_76869_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/tesselation_hu52df91dbc40e3642fab85fe9999b9017_76869_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/tesselation_hu52df91dbc40e3642fab85fe9999b9017_76869_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/tesselation_hu52df91dbc40e3642fab85fe9999b9017_76869_660x0_resize_box_3.png alt><figcaption>Examples of tesselations</figcaption></figure></p><p>Let us fix a data structure that represents unit cubes. Consider a unit cube aligned to the cartesian coordinate system and that the &ldquo;xz&rdquo; plane represents a traditional map where the common practice defines the four points of the horizon. There are six primary directions towards each cube&rsquo;s face: north, south, east, west, top, and bottom. We label the cube&rsquo;s faces according to the direction.</p><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/primal_hue4f916edfa2a40ea52456c70b71d9185_33875_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/primal_hue4f916edfa2a40ea52456c70b71d9185_33875_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/primal_hue4f916edfa2a40ea52456c70b71d9185_33875_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/primal_hue4f916edfa2a40ea52456c70b71d9185_33875_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/primal_hue4f916edfa2a40ea52456c70b71d9185_33875_660x0_resize_box_3.png alt><figcaption>The six primary directions</figcaption></figure></p><p>We represent each labeled cube face as a counterclockwise or clockwise list of its vertices regarding its interior. We use a counterclockwise listing when the interior is below, left of, or behind the face. We use a clockwise listing when the interior is above, right, or in front of the face:</p><ul><li>The <em>north</em> face is \(0321\)</li><li>The <em>south</em> face is \(4567\)</li><li>The <em>east</em> face is \(6512\)</li><li>The <em>west</em> face is \(0473\)</li><li>The <em>top</em> face is \(3762\)</li><li>The <em>bottom</em> face is \(1265\)</li></ul><p>The centroid of a unit cube is simply the arithmetic mean of its vertices, and we calculate it twenty-four additions and three divisions:</p><p>$$
c=(x,y,z) = \left( \frac{\sum_{i=1}^8}{8}x_i, \frac{\sum_{i=1}^8}{8}y_i,
\frac{\sum_{i=1}^8}{8}z_i \right)
$$</p><p>We realize the centroid as the vector from \((0,0,0)\) towards the \((x,y,z)\) point. Given two unit cubes \(C_1\) and \(C_2\) in 3D space, there is a well-defined ordering if we consider the relative positions of the cubes’ centroids. We say that the unit cube \(C_2\) is “bigger than” the unit cube \(C_1\) if and only if their centroids respect the exact ordering \(c_2>c_1\). The relative position of the cube \(C_2\) might be right, or on top or, in front of the cube \(C_1\). The same reasoning also applies when we try to locate the immediate next of the unit cube \(C\) with centroid \(c\) along each of the \(x\), \(y\), \(z\) axes:</p><ul><li>The <em>west</em> cube is around \((x+1,y,z)\)</li><li>The <em>top</em> cube is around \((x,y+1,z)\)</li><li>The <em>south</em> cube is around \((x,y,z+1)\)</li><li>Similarly, for the <em>east</em>, <em>bottom</em>, and <em>north</em> cubes.</li></ul><h2 id=a-python-class-for-unit-cubes class="relative group">A Python class for unit cubes <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#a-python-class-for-unit-cubes aria-label=Anchor>#</a></span></h2><p>Let us start by implementing a class that realizes the unit cube’s faces. Our unit cube complexes also comprise instances of collections of such faces, so it seems reasonable to define the normal function as a method that returns a Vector instance perpendicular to the respective plane.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Face</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;A general representation of a complex&#39;s face&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vertices</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;self.vertices is an iterable of Point&#34;</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span> <span class=o>=</span> <span class=n>vertices</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>_repr</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Face</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>_repr</span> <span class=o>+=</span> <span class=s2>&#34;</span><span class=se>\t</span><span class=si>%s</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>vertex</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>_repr</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>normal</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;A vector perpendicular to the face&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>v</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span>
</span></span><span class=line><span class=cl>        <span class=n>v1</span> <span class=o>=</span> <span class=n>v</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>-</span> <span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=n>v2</span> <span class=o>=</span> <span class=n>v</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>-</span> <span class=n>v</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>v1</span><span class=o>.</span><span class=n>cross</span><span class=p>(</span><span class=n>v2</span><span class=p>)</span>
</span></span></code></pre></div><p>A cuboid is a collection of six faces, the north, south, east, west, top, and bottom. We implement the face dictionary using the definitions given above: the face representation is a counterclockwise listing of its vertices when the interior of the cuboid is below, left, or behind the face. Otherwise, it is a clockwise listing of vertices. The centroid of the cuboid is the weighted average of the cuboid’s vertices.</p><p>We compare cuboids by utilizing the already implemented comparison between instances of the Point class. So to compare cuboids, we compare their centroids using the reasoning we described above. To translate an instance relative to a given vector v, we simply iterate over the vertices and translate each vertex using the given vector.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>Cuboid</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;A class for cuboids&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vertices</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span> <span class=o>=</span> <span class=nb>sorted</span><span class=p>(</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>v</span> <span class=o>=</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>facedict</span> <span class=o>=</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;north&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>6</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>4</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;south&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>5</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>7</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>3</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;east&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>5</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>4</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>6</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>7</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;west&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>2</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;top&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>6</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>7</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;bottom&#34;</span><span class=p>:</span> <span class=n>Face</span><span class=p>([</span><span class=n>v</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>4</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>5</span><span class=p>],</span> <span class=n>v</span><span class=p>[</span><span class=mi>1</span><span class=p>]]),</span>
</span></span><span class=line><span class=cl>        <span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__repr__</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>_repr</span> <span class=o>=</span> <span class=s2>&#34;</span><span class=se>\n</span><span class=s2>Cuboid:</span><span class=se>\n</span><span class=s2>--------</span><span class=se>\n</span><span class=s2>Vertices</span><span class=se>\n</span><span class=s2>--------</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>_repr</span> <span class=o>+=</span> <span class=s2>&#34;</span><span class=se>\t</span><span class=si>%s</span><span class=se>\n</span><span class=s2>&#34;</span> <span class=o>%</span> <span class=n>vertex</span>
</span></span><span class=line><span class=cl>        <span class=n>_repr</span> <span class=o>+=</span> <span class=s2>&#34;-----</span><span class=se>\n</span><span class=s2>Faces</span><span class=se>\n</span><span class=s2>-----</span><span class=se>\n</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>orientation</span><span class=p>,</span> <span class=n>face</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>faces</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>_repr</span> <span class=o>+=</span> <span class=s2>&#34;</span><span class=si>{0}</span><span class=s2>: </span><span class=si>{1}</span><span class=s2>&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>orientation</span><span class=p>,</span> <span class=n>face</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>_repr</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__eq__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>==</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__ne__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>!=</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__lt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>&lt;</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>__qt__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>&gt;</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__le__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>&lt;=</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__ge__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>other</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=bp>self</span><span class=o>.</span><span class=n>centroid</span> <span class=o>&gt;=</span> <span class=n>other</span><span class=o>.</span><span class=n>centroid</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>faces</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;docstring&#34;</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>orientation</span><span class=p>,</span> <span class=n>face</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>facedict</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>yield</span> <span class=n>orientation</span><span class=p>,</span> <span class=n>face</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@property</span>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>centroid</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;Returns the centroid of the cuboid&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span><span class=p>,</span> <span class=mf>0.0</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>x</span> <span class=o>+=</span> <span class=n>vertex</span><span class=o>.</span><span class=n>x</span>
</span></span><span class=line><span class=cl>            <span class=n>y</span> <span class=o>+=</span> <span class=n>vertex</span><span class=o>.</span><span class=n>y</span>
</span></span><span class=line><span class=cl>            <span class=n>z</span> <span class=o>+=</span> <span class=n>vertex</span><span class=o>.</span><span class=n>z</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span> <span class=o>/</span> <span class=mf>8.0</span><span class=p>,</span> <span class=n>y</span> <span class=o>/</span> <span class=mf>8.0</span><span class=p>,</span> <span class=n>z</span> <span class=o>/</span> <span class=mf>8.0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>translate</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>vector</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>translated</span> <span class=o>=</span> <span class=p>[</span><span class=n>vertex</span> <span class=o>+</span> <span class=n>vector</span> <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>vertices</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span> <span class=n>Cuboid</span><span class=p>(</span><span class=n>translated</span><span class=p>)</span>
</span></span></code></pre></div><p>Let us use our classes and create two cuboids. We make the first one by explicitly defining its eight vertices, while the second one is a translation of the first using the \((1,1,1)\) vector. We print the cuboids and finally check their order.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl.cuboids</span> <span class=kn>import</span> <span class=n>Cuboid</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>Point</span><span class=p>,</span> <span class=n>Vector</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x0</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x2</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x3</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x4</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x5</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x6</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x7</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboid0</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>([</span><span class=n>x0</span><span class=p>,</span> <span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>x3</span><span class=p>,</span> <span class=n>x4</span><span class=p>,</span> <span class=n>x5</span><span class=p>,</span> <span class=n>x6</span><span class=p>,</span> <span class=n>x7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>vector</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>cuboid1</span> <span class=o>=</span> <span class=n>cuboid0</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=n>vector</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>cuboid0</span><span class=p>,</span> <span class=n>cuboid1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>print</span><span class=p>(</span><span class=n>cuboid0</span><span class=o>.</span><span class=n>centroid</span><span class=p>,</span> <span class=n>cuboid1</span><span class=o>.</span><span class=n>centroid</span><span class=p>,</span> <span class=n>cuboid0</span> <span class=o>&lt;</span> <span class=n>cuboid1</span><span class=p>,</span> <span class=n>cuboid0</span> <span class=o>&gt;</span> <span class=n>cuboid1</span><span class=p>)</span>
</span></span></code></pre></div><p>We include the above script’s output by representing the cuboids side by side for comparison and space economy.</p><pre tabindex=0><code> Cuboid:       Cuboid:
 --------      --------
 Vertices      Vertices
 --------      --------
 Point(0,0,0)  Point(1,1,1)
 Point(0,0,1)  Point(1,1,2)
 Point(0,1,0)  Point(1,2,1)
 Point(0,1,1)  Point(1,2,2)
 Point(1,0,0)  Point(2,1,1)
 Point(1,0,1)  Point(2,1,2)
 Point(1,1,0)  Point(2,2,1)
 Point(1,1,1)  Point(2,2,2)
 ----------    ----------
 north Face    north Face
 ----------    ----------
 Point(0,0,0)  Point(1,1,1)
 Point(0,1,0)  Point(1,2,1)
 Point(1,1,0)  Point(2,2,1)
 Point(1,0,0)  Point(2,1,1)
 ----------    ----------
 south Face    south Face
 ----------    ----------
 Point(0,0,1)  Point(1,1,2)
 Point(1,0,1)  Point(2,1,2)
 Point(1,1,1)  Point(2,2,2)
 Point(0,1,1)  Point(1,2,2)
 ---------     ---------
 east Face     east Face
 ---------     ---------
 Point(1,0,1)  Point(2,1,2)
 Point(1,0,0)  Point(2,1,1)
 Point(1,1,0)  Point(2,2,1)
 Point(1,1,1)  Point(2,2,2)
 ---------     ---------
 west Face     west Face
 ---------     ---------
 Point(0,0,0)  Point(1,1,1)
 Point(0,0,1)  Point(1,1,2)
 Point(0,1,1)  Point(1,2,2)
 Point(0,1,0)  Point(1,2,1)
 --------      --------
 top Face      top Face
 --------      --------
 Point(1,1,0)  Point(2,2,1)
 Point(0,1,0)  Point(1,2,1)
 Point(0,1,1)  Point(1,2,2)
 Point(1,1,1)  Point(2,2,2)
 -----------   -----------
 bottom Face   bottom Face
 -----------   -----------
 Point(0,0,0)  Point(1,1,1)
 Point(1,0,0)  Point(2,1,1)
 Point(1,0,1)  Point(2,1,2)
 Point(0,0,1)  Point(1,1,2)

 Point(0.5,0.5,0.5) Point(1.5,1.5,1.5) True False
</code></pre><h2 id=a-python-class-for-cuboid-complexes class="relative group">A Python class for cuboid complexes <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#a-python-class-for-cuboid-complexes aria-label=Anchor>#</a></span></h2><p>We are now ready to capitalize on our already made classes and assemble a Python class that handles unit cube complexes in 3D space. We initialize an instance of CuboidComplex by passing as a parameter an iterable of cuboids, each indexed using its centroid into the instance’s <code>cubdict</code> attribute. We initialize the triangle and vertex lists that comprise the final complex as empty lists.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>class</span> <span class=nc>CuboidComplex</span><span class=p>(</span><span class=nb>object</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34; A class that handles unit cube complexes in 3D space &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>def</span> <span class=fm>__init__</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cuboids</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shell_triangles</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>shell_vertices</span> <span class=o>=</span> <span class=nb>list</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Started inserting cuboids ... &#34;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>cuboid</span> <span class=ow>in</span> <span class=n>cuboids</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=n>Cuboid</span><span class=p>(</span><span class=n>cuboid</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Done inserting </span><span class=si>{}</span><span class=s2> cuboids&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>cuboids</span><span class=p>)))</span>
</span></span></code></pre></div><p>Let us focus on the insert method that uses the <code>cubdict</code> dictionary to hold the data of the inserted cuboids, indexed by their centroid. The dictionary’s key is the cuboid’s centroid, while the data indexed is another dictionary indexed by the cuboid’s faces orientation. The indexed data are the face itself and a boolean indication of whether it is outer or not. Imagine here that we need to insert every given cuboid and that the very first cuboid comprises a complex with six outer faces.</p><p>Our next task is to identify all the immediate neighbors of the inserted cuboid. Our <code>cubdict</code> dictionary is a handy construct as we can locate them by looking towards the six faces orientation of the inserted cuboid. To that direction, we calculate the neighbors’ indexes, i.e., the neighbors’ centroids, as already described. If the currently inserted cuboid has actual neighbors in the complex, their centroids must already be indexes of the <code>cubdict</code> dictionary.</p><p>Our last task is to update the complex’s faces’ boolean <code>out</code> indicator. If a cuboid is on <em>top</em> of the inserted one, then the inserted cuboid’s top face and the neighbor’s bottom face reside inside the complex. If there is a cuboid <em>west</em> of the inserted one, then the inserted cuboid’s west face and the neighbor’s east face both reside inside the complex. The same reasoning applies to every other direction by refreshing the touching faces as inside ones, i.e., updating the boolean <code>out</code> indicator. These operations are well-defined and repeatedly performed for every inserted cuboid. It must now be evident that after the insertion of the last cuboid, our <code>cubdict</code> construct holds all the complex’s faces, and for every face, the correct indicator of whether the face is outer or not.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>insert</span><span class=p>(</span><span class=bp>self</span><span class=p>,</span> <span class=n>cuboid</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34; Inserts a cuboid into the complex keeping track of outer Faces &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=n>cuboid_id</span> <span class=o>=</span> <span class=n>cuboid</span><span class=o>.</span><span class=n>centroid</span>  <span class=c1># id is an instance of Point</span>
</span></span><span class=line><span class=cl>        <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>]</span> <span class=o>=</span> <span class=p>{}</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>orientation</span><span class=p>,</span> <span class=n>face</span> <span class=ow>in</span> <span class=n>cuboid</span><span class=o>.</span><span class=n>faces</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=n>orientation</span><span class=p>]</span> <span class=o>=</span> <span class=p>{</span><span class=s2>&#34;face&#34;</span><span class=p>:</span> <span class=n>face</span><span class=p>,</span> <span class=s2>&#34;out&#34;</span><span class=p>:</span> <span class=kc>True</span><span class=p>}</span>
</span></span><span class=line><span class=cl>        <span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>=</span> <span class=n>cuboid_id</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>cuboid_id</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>cuboid_id</span><span class=o>.</span><span class=n>z</span>
</span></span><span class=line><span class=cl>        <span class=n>top_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>bottom_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>west_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span> <span class=o>-</span> <span class=mi>1</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>east_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span> <span class=o>+</span> <span class=mi>1</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>north_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>south_id</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=n>x</span><span class=p>,</span> <span class=n>y</span><span class=p>,</span> <span class=n>z</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>top_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>top_id</span><span class=p>][</span><span class=s2>&#34;bottom&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;top&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>bottom_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>bottom_id</span><span class=p>][</span><span class=s2>&#34;top&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;bottom&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>west_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>west_id</span><span class=p>][</span><span class=s2>&#34;east&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;west&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>east_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>east_id</span><span class=p>][</span><span class=s2>&#34;west&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;east&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>north_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>north_id</span><span class=p>][</span><span class=s2>&#34;south&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;north&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>south_id</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>south_id</span><span class=p>][</span><span class=s2>&#34;north&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span><span class=line><span class=cl>            <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=p>[</span><span class=n>cuboid_id</span><span class=p>][</span><span class=s2>&#34;south&#34;</span><span class=p>][</span><span class=s2>&#34;out&#34;</span><span class=p>]</span> <span class=o>=</span> <span class=kc>False</span>
</span></span></code></pre></div><p>We are now ready to calculate the complex’s outer shell vertices and triangles. To that end, we iterate over the <code>cubdict</code> dictionary items. We are only interested in outer faces, so we take action only when we find an appropriate <code>out</code> indicator. A local <code>vdict</code> dictionary construct keeps track of already found vertices to avoid inserting the same vertex to the shell’s vertices list more than once. When we process an outer face, we iterate over its vertices to update the shell’s vertices and identify the two triangles that comprise the face. We finally insert the triangles into the shell’s triangle list.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>shell</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=s2>&#34;&#34;&#34; Calculates the outer shell vertices and triangles &#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Started outer shell calculation  ... &#34;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>vdict</span> <span class=o>=</span> <span class=nb>dict</span><span class=p>()</span>
</span></span><span class=line><span class=cl>        <span class=n>nvs</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>cuboid</span><span class=p>,</span> <span class=n>faces_info</span> <span class=ow>in</span> <span class=bp>self</span><span class=o>.</span><span class=n>cubdict</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>face_label</span><span class=p>,</span> <span class=n>face_info</span> <span class=ow>in</span> <span class=n>faces_info</span><span class=o>.</span><span class=n>items</span><span class=p>():</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=n>face_info</span><span class=p>[</span><span class=s2>&#34;out&#34;</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>tface</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>                    <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=n>face_info</span><span class=p>[</span><span class=s2>&#34;face&#34;</span><span class=p>]</span><span class=o>.</span><span class=n>vertices</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                        <span class=n>coords</span> <span class=o>=</span> <span class=p>(</span><span class=n>vertex</span><span class=o>.</span><span class=n>x</span><span class=p>,</span> <span class=n>vertex</span><span class=o>.</span><span class=n>y</span><span class=p>,</span> <span class=n>vertex</span><span class=o>.</span><span class=n>z</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                        <span class=k>if</span> <span class=n>coords</span> <span class=ow>not</span> <span class=ow>in</span> <span class=n>vdict</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                            <span class=n>nvs</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>                            <span class=bp>self</span><span class=o>.</span><span class=n>shell_vertices</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>coords</span><span class=p>)</span>
</span></span><span class=line><span class=cl>                            <span class=n>vdict</span><span class=p>[</span><span class=n>coords</span><span class=p>]</span> <span class=o>=</span> <span class=n>nvs</span>
</span></span><span class=line><span class=cl>                        <span class=n>tface</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>vdict</span><span class=p>[</span><span class=n>coords</span><span class=p>])</span>
</span></span><span class=line><span class=cl>                    <span class=n>tri1</span> <span class=o>=</span> <span class=p>[</span><span class=n>tface</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>tface</span><span class=p>[</span><span class=mi>1</span><span class=p>],</span> <span class=n>tface</span><span class=p>[</span><span class=mi>2</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>                    <span class=n>tri2</span> <span class=o>=</span> <span class=p>[</span><span class=n>tface</span><span class=p>[</span><span class=mi>2</span><span class=p>],</span> <span class=n>tface</span><span class=p>[</span><span class=mi>3</span><span class=p>],</span> <span class=n>tface</span><span class=p>[</span><span class=mi>0</span><span class=p>]]</span>
</span></span><span class=line><span class=cl>                    <span class=bp>self</span><span class=o>.</span><span class=n>shell_triangles</span> <span class=o>+=</span> <span class=p>[</span><span class=n>tri1</span><span class=p>,</span> <span class=n>tri2</span><span class=p>]</span>
</span></span><span class=line><span class=cl>        <span class=nb>print</span><span class=p>(</span>
</span></span><span class=line><span class=cl>            <span class=s2>&#34;Done</span><span class=se>\n</span><span class=s2>There are </span><span class=si>{}</span><span class=s2> vertices and </span><span class=si>{}</span><span class=s2> triangles&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span>
</span></span><span class=line><span class=cl>                <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>shell_vertices</span><span class=p>),</span> <span class=nb>len</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>shell_triangles</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=p>)</span>
</span></span></code></pre></div><p>To export the shell’s representation into the STL file format, we use the excellent <code>numpy-stl</code> Python module. We import the module’s mesh library that constructs STL meshes by utilizing our already calculated list of shell’s vertices and triangles. We save the calculated mesh to the <code>model.stl</code> file.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl>    <span class=k>def</span> <span class=nf>export_stl</span><span class=p>(</span><span class=bp>self</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>vertices</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>shell_vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>faces</span> <span class=o>=</span> <span class=n>np</span><span class=o>.</span><span class=n>array</span><span class=p>(</span><span class=bp>self</span><span class=o>.</span><span class=n>shell_triangles</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=n>stlmesh</span> <span class=o>=</span> <span class=n>mesh</span><span class=o>.</span><span class=n>Mesh</span><span class=p>(</span><span class=n>np</span><span class=o>.</span><span class=n>zeros</span><span class=p>(</span><span class=n>faces</span><span class=o>.</span><span class=n>shape</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>dtype</span><span class=o>=</span><span class=n>mesh</span><span class=o>.</span><span class=n>Mesh</span><span class=o>.</span><span class=n>dtype</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>i</span><span class=p>,</span> <span class=n>f</span> <span class=ow>in</span> <span class=nb>enumerate</span><span class=p>(</span><span class=n>faces</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>3</span><span class=p>):</span>
</span></span><span class=line><span class=cl>                <span class=n>stlmesh</span><span class=o>.</span><span class=n>vectors</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=n>vertices</span><span class=p>[</span><span class=n>f</span><span class=p>[</span><span class=n>j</span><span class=p>],</span> <span class=p>:]</span>
</span></span><span class=line><span class=cl>        <span class=n>stlmesh</span><span class=o>.</span><span class=n>save</span><span class=p>(</span><span class=s2>&#34;model.stl&#34;</span><span class=p>)</span>
</span></span></code></pre></div><h2 id=test-cases-of-unit-cube-complexes class="relative group">Test cases of unit cube complexes <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#test-cases-of-unit-cube-complexes aria-label=Anchor>#</a></span></h2><p>Let us now check various test cases regarding the usage of our CuboidComplex class. We will present the Python code and the resulting STL file. To produce the shown images, we inserted the generated STL mesh into the Paraview and exported the scene into a PDF file. Then we converted the PDF file to a PNG using the pdftoppm Linux utility.</p><h3 id=a-cube class="relative group">A cube <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#a-cube aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl.cuboids</span> <span class=kn>import</span> <span class=n>Cuboid</span><span class=p>,</span> <span class=n>CuboidComplex</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>Point</span><span class=p>,</span> <span class=n>Vector</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x0</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x2</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x3</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x4</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x5</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x6</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x7</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboid</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>([</span><span class=n>x0</span><span class=p>,</span> <span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>x3</span><span class=p>,</span> <span class=n>x4</span><span class=p>,</span> <span class=n>x5</span><span class=p>,</span> <span class=n>x6</span><span class=p>,</span> <span class=n>x7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span> <span class=o>=</span> <span class=n>CuboidComplex</span><span class=p>([</span><span class=n>cuboid</span><span class=o>.</span><span class=n>vertices</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>shell</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>export_stl</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>Started inserting cuboids ... Done inserting 1 cuboids
Started outer shell calculation  ... Done
There are 8 vertices and 12 triangles.
</code></pre><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/example0_hu6a03985aae1fbb425d1584d3d81907d9_57854_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/example0_hu6a03985aae1fbb425d1584d3d81907d9_57854_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/example0_hu6a03985aae1fbb425d1584d3d81907d9_57854_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/example0_hu6a03985aae1fbb425d1584d3d81907d9_57854_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/example0_hu6a03985aae1fbb425d1584d3d81907d9_57854_660x0_resize_box_3.png alt></figure></p><h3 id=two-cubes-side-by-side class="relative group">Two cubes side by side <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#two-cubes-side-by-side aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl.cuboids</span> <span class=kn>import</span> <span class=n>Cuboid</span><span class=p>,</span> <span class=n>CuboidComplex</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>Point</span><span class=p>,</span> <span class=n>Vector</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x0</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x2</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x3</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x4</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x5</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x6</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x7</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboid_list</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl><span class=n>cuboid0</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>([</span><span class=n>x0</span><span class=p>,</span> <span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>x3</span><span class=p>,</span> <span class=n>x4</span><span class=p>,</span> <span class=n>x5</span><span class=p>,</span> <span class=n>x6</span><span class=p>,</span> <span class=n>x7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>vector</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span><span class=mi>0</span><span class=p>,</span><span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>cuboid1</span> <span class=o>=</span> <span class=n>cuboid0</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=n>vector</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span> <span class=o>=</span> <span class=n>CuboidComplex</span><span class=p>([</span><span class=n>cuboid0</span><span class=o>.</span><span class=n>vertices</span><span class=p>,</span> <span class=n>cuboid1</span><span class=o>.</span><span class=n>vertices</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>shell</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>export_stl</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>Started inserting cuboids ... Done inserting 2 cuboids
Started outer shell calculation  ... Done
There are 12 vertices and 20 triangles.
</code></pre><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/example1_hucc55549293cc43378e45f60d68b92db9_65894_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/example1_hucc55549293cc43378e45f60d68b92db9_65894_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/example1_hucc55549293cc43378e45f60d68b92db9_65894_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/example1_hucc55549293cc43378e45f60d68b92db9_65894_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/example1_hucc55549293cc43378e45f60d68b92db9_65894_660x0_resize_box_3.png alt></figure></p><h3 id=four-cubes-side-by-side class="relative group">Four cubes side by side <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#four-cubes-side-by-side aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl.cuboids</span> <span class=kn>import</span> <span class=n>Cuboid</span><span class=p>,</span> <span class=n>CuboidComplex</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>Point</span><span class=p>,</span> <span class=n>Vector</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x0</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x2</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x3</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x4</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x5</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x6</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x7</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboid</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>([</span><span class=n>x0</span><span class=p>,</span> <span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>x3</span><span class=p>,</span> <span class=n>x4</span><span class=p>,</span> <span class=n>x5</span><span class=p>,</span> <span class=n>x6</span><span class=p>,</span> <span class=n>x7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>cuboid_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>cuboid</span><span class=p>]</span>
</span></span><span class=line><span class=cl><span class=n>translation_vectors</span> <span class=o>=</span> <span class=p>[</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>),</span>
</span></span><span class=line><span class=cl>    <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>vector</span> <span class=ow>in</span> <span class=n>translation_vectors</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>cuboid_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>cuboid</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=n>vector</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>complex</span> <span class=o>=</span> <span class=n>CuboidComplex</span><span class=p>([</span><span class=n>cuboid</span><span class=o>.</span><span class=n>vertices</span> <span class=k>for</span>
</span></span><span class=line><span class=cl>                         <span class=n>cuboid</span> <span class=ow>in</span> <span class=n>cuboid_list</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>shell</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>export_stl</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>Started inserting cuboids ... Done inserting 4 cuboids
Started outer shell calculation  ... Done
There are 18 vertices and 32 triangles.
</code></pre><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/example2_hu4bf48ac26d94c02cde683343cf8731f5_78307_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/example2_hu4bf48ac26d94c02cde683343cf8731f5_78307_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/example2_hu4bf48ac26d94c02cde683343cf8731f5_78307_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/example2_hu4bf48ac26d94c02cde683343cf8731f5_78307_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/example2_hu4bf48ac26d94c02cde683343cf8731f5_78307_660x0_resize_box_3.png alt></figure></p><h3 id=three-connected-columns class="relative group">Three connected columns <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#three-connected-columns aria-label=Anchor>#</a></span></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl.cuboids</span> <span class=kn>import</span> <span class=n>Cuboid</span><span class=p>,</span> <span class=n>CuboidComplex</span>
</span></span><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>Point</span><span class=p>,</span> <span class=n>Vector</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>x0</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x1</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x2</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x3</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x4</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x5</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x6</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>x7</span> <span class=o>=</span> <span class=n>Point</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboid</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>([</span><span class=n>x0</span><span class=p>,</span> <span class=n>x1</span><span class=p>,</span> <span class=n>x2</span><span class=p>,</span> <span class=n>x3</span><span class=p>,</span> <span class=n>x4</span><span class=p>,</span> <span class=n>x5</span><span class=p>,</span> <span class=n>x6</span><span class=p>,</span> <span class=n>x7</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=n>cuboid_list</span> <span class=o>=</span> <span class=p>[</span><span class=n>cuboid</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>current</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>(</span><span class=n>cuboid</span><span class=o>.</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>current</span> <span class=o>=</span> <span class=n>Cuboid</span><span class=p>(</span><span class=n>cuboid</span><span class=o>.</span><span class=n>vertices</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>4</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>vector</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>elif</span> <span class=n>j</span> <span class=o>==</span> <span class=mi>0</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>vector</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>vector</span> <span class=o>=</span> <span class=n>Vector</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>current</span> <span class=o>=</span> <span class=n>current</span><span class=o>.</span><span class=n>translate</span><span class=p>(</span><span class=n>vector</span><span class=p>)</span>
</span></span><span class=line><span class=cl>            <span class=n>cuboid_list</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>current</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>complex</span> <span class=o>=</span> <span class=n>CuboidComplex</span><span class=p>([</span><span class=n>cuboid</span><span class=o>.</span><span class=n>vertices</span> <span class=k>for</span> <span class=n>cuboid</span> <span class=ow>in</span> <span class=n>cuboid_list</span><span class=p>])</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>shell</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>export_stl</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>Started inserting cuboids ... Done inserting 65 cuboids
Started outer shell calculation  ... Done
There are 56 vertices and 108 triangles.
</code></pre><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/example3_hu91b6dfd21aea6bcfbe8fed5acd517a7b_78625_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/example3_hu91b6dfd21aea6bcfbe8fed5acd517a7b_78625_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/example3_hu91b6dfd21aea6bcfbe8fed5acd517a7b_78625_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/example3_hu91b6dfd21aea6bcfbe8fed5acd517a7b_78625_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/example3_hu91b6dfd21aea6bcfbe8fed5acd517a7b_78625_660x0_resize_box_3.png alt></figure></p><h2 id=converting-the-nodes-connectivity-density-representation-to-python-lists class="relative group">Converting the nodes, connectivity, density representation to Python lists <span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#converting-the-nodes-connectivity-density-representation-to-python-lists aria-label=Anchor>#</a></span></h2><p>A usual representation of finite element methods analysis results is the nodes-connectivity representation. As a result of an optimization process, there is an extra density parameter for every connectivity construct. We developed helper functions to convert this information to use Python lists representations.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>csv2list</span><span class=p>(</span><span class=n>afile</span><span class=p>,</span> <span class=n>atype</span><span class=p>,</span> <span class=n>prepend_dummy</span><span class=o>=</span><span class=kc>False</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;afile is a csv file of atype values, returns a list of tuples&#34;</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Opening </span><span class=si>{}</span><span class=s2> ... &#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=n>afile</span><span class=p>),</span> <span class=n>end</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>alist</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=nb>open</span><span class=p>(</span><span class=n>afile</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=n>line2list</span> <span class=o>=</span> <span class=n>line</span><span class=o>.</span><span class=n>strip</span><span class=p>()</span><span class=o>.</span><span class=n>split</span><span class=p>(</span><span class=s2>&#34;,&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=nb>len</span><span class=p>(</span><span class=n>line2list</span><span class=p>)</span> <span class=o>&gt;</span> <span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>alist</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=nb>tuple</span><span class=p>(</span><span class=n>atype</span><span class=p>(</span><span class=n>i</span><span class=p>)</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=n>line2list</span><span class=p>))</span>
</span></span><span class=line><span class=cl>        <span class=k>else</span><span class=p>:</span>
</span></span><span class=line><span class=cl>            <span class=n>alist</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>atype</span><span class=p>(</span><span class=n>line2list</span><span class=p>[</span><span class=mi>0</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Read </span><span class=si>{}</span><span class=s2> values&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>alist</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=n>prepend_dummy</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>alist</span><span class=o>.</span><span class=n>insert</span><span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=p>(</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>alist</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>dense_cuboids</span><span class=p>(</span><span class=n>nodes_file</span><span class=p>,</span> <span class=n>connectivity_file</span><span class=p>,</span> <span class=n>density_file</span><span class=p>,</span> <span class=n>threshold</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;&#34;&#34;returns a list of the &#39;dense&#39; cuboids&#34;&#34;&#34;</span>
</span></span><span class=line><span class=cl>    <span class=n>alist</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>    <span class=n>nodes</span> <span class=o>=</span> <span class=n>csv2list</span><span class=p>(</span><span class=n>nodes_file</span><span class=p>,</span> <span class=nb>int</span><span class=p>,</span> <span class=n>prepend_dummy</span><span class=o>=</span><span class=kc>True</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>connectivity</span> <span class=o>=</span> <span class=n>csv2list</span><span class=p>(</span><span class=n>connectivity_file</span><span class=p>,</span> <span class=nb>int</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>density</span> <span class=o>=</span> <span class=n>csv2list</span><span class=p>(</span><span class=n>density_file</span><span class=p>,</span> <span class=nb>float</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Filtering dense cuboids ...&#34;</span><span class=p>,</span> <span class=n>end</span><span class=o>=</span><span class=s2>&#34;&#34;</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>atuple</span> <span class=ow>in</span> <span class=nb>zip</span><span class=p>(</span><span class=n>density</span><span class=p>,</span> <span class=n>connectivity</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=n>atuple</span><span class=p>[</span><span class=mi>0</span><span class=p>]</span> <span class=o>-</span> <span class=n>threshold</span> <span class=o>&gt;</span> <span class=n>EPSILON</span><span class=p>:</span>  <span class=c1># cuboid is &#39;dense enough&#39;</span>
</span></span><span class=line><span class=cl>            <span class=n>cuboid</span> <span class=o>=</span> <span class=p>[]</span>
</span></span><span class=line><span class=cl>            <span class=k>for</span> <span class=n>vertex</span> <span class=ow>in</span> <span class=n>atuple</span><span class=p>[</span><span class=mi>1</span><span class=p>]:</span>
</span></span><span class=line><span class=cl>                <span class=n>cuboid</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>Point</span><span class=o>.</span><span class=n>from_tuple</span><span class=p>(</span><span class=n>nodes</span><span class=p>[</span><span class=n>vertex</span><span class=p>]))</span>
</span></span><span class=line><span class=cl>            <span class=n>alist</span><span class=o>.</span><span class=n>append</span><span class=p>(</span><span class=n>cuboid</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=s2>&#34;Filtered </span><span class=si>{}</span><span class=s2> dense cuboids&#34;</span><span class=o>.</span><span class=n>format</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>alist</span><span class=p>)))</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>alist</span>
</span></span></code></pre></div><p>We had a set of nodes-connectivity-density files regarding the optimization output of a finite element analysis process. We utilized the above helper functions to convert this set of files to a suitable input of our <code>CuboidComplex</code> class.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=kn>from</span> <span class=nn>ucc2stl</span> <span class=kn>import</span> <span class=n>dense_cuboids</span><span class=p>,</span> <span class=n>CuboidComplex</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>cuboids</span> <span class=o>=</span> <span class=n>dense_cuboids</span><span class=p>(</span><span class=s2>&#34;Node.txt&#34;</span><span class=p>,</span> <span class=s2>&#34;Connectivity.txt&#34;</span><span class=p>,</span> <span class=s2>&#34;density.txt&#34;</span><span class=p>,</span> <span class=mf>0.3</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span> <span class=o>=</span> <span class=n>CuboidComplex</span><span class=p>(</span><span class=n>cuboids</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>shell</span><span class=p>()</span>
</span></span><span class=line><span class=cl><span class=nb>complex</span><span class=o>.</span><span class=n>export_stl</span><span class=p>()</span>
</span></span></code></pre></div><pre tabindex=0><code>Opening Node.txt ... Read 129444 values
Opening Connectivity.txt ... Read 117000 values
Opening density.txt ... Read 117000 values
Filtering dense cuboids ...Filtered 37148 dense cuboids
Started inserting cuboids ... Done inserting 37148 cuboids
Started outer shell calculation  ... Done
There are 25264 vertices and 50572 triangles.
</code></pre><p>The picture of the resulting STL file output is the following:</p><p><figure><img class="my-0 rounded-md" srcset="/posts/addoptml/unit-cube-complex/bridge_hu52f1398c94af814a2a9b4379358459d0_103864_330x0_resize_box_3.png 330w,
/posts/addoptml/unit-cube-complex/bridge_hu52f1398c94af814a2a9b4379358459d0_103864_660x0_resize_box_3.png 660w,
/posts/addoptml/unit-cube-complex/bridge_hu52f1398c94af814a2a9b4379358459d0_103864_1024x0_resize_box_3.png 1024w,
/posts/addoptml/unit-cube-complex/bridge_hu52f1398c94af814a2a9b4379358459d0_103864_1320x0_resize_box_3.png 2x" src=/posts/addoptml/unit-cube-complex/bridge_hu52f1398c94af814a2a9b4379358459d0_103864_660x0_resize_box_3.png alt></figure></p></div></section><footer class="pt-8 max-w-prose print:hidden"><div class=flex><img class="w-24 h-24 !mt-0 !mb-0 ltr:mr-4 rtl:ml-4 rounded-full" width=96 height=96 alt="Christodoulos Fragkoudakis" src=/img/me_hu05298c82ebb397db8a1b138ab2bc5172_488504_192x192_fill_q75_box_smart1.jpg><div class=place-self-center><div class="text-[0.6rem] leading-3 text-neutral-500 dark:text-neutral-400 uppercase">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Christodoulos Fragkoudakis</div><div class="text-sm text-neutral-700 dark:text-neutral-400">A nerd, too old to grow up</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/christodoulos target=_blank aria-label=Github rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.linkedin.com/in/fragkoudakis/ target=_blank aria-label=Linkedin rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M416 32H31.9C14.3 32 0 46.5.0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6.0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3.0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2.0 38.5 17.3 38.5 38.5.0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6.0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2.0 79.7 44.3 79.7 101.9V416z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://twitter.com/CFragkoudakis target=_blank aria-label=Twitter rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645.0 138.72-105.583 298.558-298.558 298.558-59.452.0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055.0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421.0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391.0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04.0-57.828 46.782-104.934 104.934-104.934 30.213.0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"/></svg></span></a><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://www.facebook.com/christodoulos.fragkoudakis/ target=_blank aria-label=Facebook rel="me noopener noreferrer"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14.0 55.52 4.84 55.52 4.84v61h-31.28c-30.8.0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"/></svg></span></a></div></div></div></div><div class=pt-8><hr class="border-dotted border-neutral-300 dark:border-neutral-600"><div class="flex justify-between pt-3"><span><a class="flex group" href=/posts/linux/neovim-setup/><span class="mr-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span>
<span class="ml-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Neovim setup</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2021-05-28 00:00:00 +0000 UTC">May 28, 2021</time></span></span></a></span>
<span><a class="flex text-right group" href=/posts/teaching/coding-factory/><span class="flex flex-col"><span class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500">Μαθησιακό υλικό Coding Factory 2022</span>
<span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400"><time datetime="2022-03-10 00:00:00 +0000 UTC">March 10, 2022</time></span></span>
<span class="ml-3 ltr:inline rtl:hidden text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&rarr;</span>
<span class="mr-3 ltr:hidden rtl:inline text-neutral-700 dark:text-neutral group-hover:text-primary-600 dark:group-hover:text-primary-400">&larr;</span></a></span></div></div></footer></article><div class="absolute top-[100vh] ltr:right-0 rtl:left-0 w-12 pointer-events-none bottom-0"><a href=#the-top class="w-12 h-12 sticky pointer-events-auto top-[calc(100vh-5.5rem)] bg-neutral/50 dark:bg-neutral-800/50 backdrop-blur rounded-full text-xl flex items-center justify-center text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400" aria-label="Scroll to top" title="Scroll to top">&uarr;</a></div></main><footer class="py-10 print:hidden"><div class="flex items-center justify-between"><div><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2022
Christodoulos Fragkoudakis</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://git.io/hugo-congo target=_blank rel="noopener noreferrer">Congo</a></p></div><div class="text-sm cursor-pointer text-neutral-700 dark:text-neutral hover:text-primary-600 dark:hover:text-primary-400 ltr:mr-14 rtl:ml-14"><button id=appearance-switcher class="w-12 h-12" type=button title="Switch to dark appearance">
<span class="inline dark:hidden"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M32 256C32 132.2 132.3 32 255.8 32c11.36.0 29.7 1.668 40.9 3.746 9.616 1.777 11.75 14.63 3.279 19.44C245 86.5 211.2 144.6 211.2 207.8c0 109.7 99.71 193 208.3 172.3 9.561-1.805 16.28 9.324 10.11 16.95C387.9 448.6 324.8 480 255.8 480 132.1 480 32 379.6 32 256z"/></svg></span></span><span class="hidden dark:inline"><span class="relative inline-block align-text-bottom icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M256 159.1c-53.02.0-95.1 42.98-95.1 95.1s41.2 96.9 95.1 96.9 95.1-42.98 95.1-95.1S309 159.1 256 159.1zM509.3 347l-63.2-91.9 63.15-91.01c6.332-9.125 1.104-21.74-9.826-23.72l-109-19.7-19.7-109c-1.975-10.93-14.59-16.16-23.72-9.824L256 65.89 164.1 2.736c-9.125-6.332-21.74-1.107-23.72 9.824L121.6 121.6 12.56 141.3C1.633 143.2-3.596 155.9 2.736 164.1L65.89 256 2.74 347.01c-6.332 9.125-1.105 21.74 9.824 23.72l109 19.7 19.7 109c1.975 10.93 14.59 16.16 23.72 9.824L256 446.1l91.01 63.15c9.127 6.334 21.75 1.107 23.72-9.822l19.7-109 109-19.7C510.4 368.8 515.6 356.1 509.3 347zM256 383.1c-70.69.0-127.1-57.31-127.1-127.1.0-70.69 57.31-127.1 127.1-127.1S383.1 186.2 383.1 256c0 70.7-56.4 127.1-127.1 127.1z"/></svg></span></span></button></div></div></footer></div></body></html>